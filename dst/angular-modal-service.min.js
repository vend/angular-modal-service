!function(e){function n(o){if(l[o])return l[o].exports;var t=l[o]={exports:{},id:o,loaded:!1};return e[o].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var l={};return n.m=e,n.c=l,n.p="",n(0)}([function(e,n){"use strict";var l=Function("return this")();l.__coverage__||(l.__coverage__={}),l=l.__coverage__,l["/Users/aarron/angular-modal-service/src/angular-modal-service.js"]||(l["/Users/aarron/angular-modal-service/src/angular-modal-service.js"]={path:"/Users/aarron/angular-modal-service/src/angular-modal-service.js",s:{1:0,2:0,3:1,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:1,51:0,52:0,53:0,54:0,55:1,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0},b:{1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},f:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},fnMap:{1:{name:"(anonymous_1)",line:5,loc:{start:{line:6,column:2},end:{line:6,column:106}}},2:{name:"ModalService",line:7,loc:{start:{line:8,column:2},end:{line:8,column:26}}},3:{name:"getTemplate",line:14,loc:{start:{line:15,column:22},end:{line:15,column:54}}},4:{name:"(anonymous_4)",line:19,loc:{start:{line:21,column:16},end:{line:21,column:35}}},5:{name:"(anonymous_5)",line:21,loc:{start:{line:23,column:13},end:{line:23,column:29}}},6:{name:"appendChild",line:33,loc:{start:{line:35,column:22},end:{line:35,column:46}}},7:{name:"(anonymous_7)",line:41,loc:{start:{line:43,column:21},end:{line:43,column:39}}},8:{name:"(anonymous_8)",line:57,loc:{start:{line:60,column:14},end:{line:60,column:33}}},9:{name:"(anonymous_9)",line:66,loc:{start:{line:69,column:19},end:{line:69,column:30}}},10:{name:"(anonymous_10)",line:67,loc:{start:{line:70,column:72},end:{line:70,column:83}}},11:{name:"closeModal",line:125,loc:{start:{line:128,column:10},end:{line:128,column:45}}},12:{name:"(anonymous_12)",line:127,loc:{start:{line:130,column:21},end:{line:130,column:32}}},13:{name:"cleanUpClose",line:133,loc:{start:{line:137,column:10},end:{line:137,column:40}}},14:{name:"(anonymous_14)",line:142,loc:{start:{line:147,column:26},end:{line:147,column:38}}},15:{name:"(anonymous_15)",line:169,loc:{start:{line:176,column:20},end:{line:176,column:36}}}},statementMap:{1:{start:{line:3,column:0},end:{line:3,column:0}},2:{start:{line:5,column:0},end:{line:5,column:0}},3:{start:{line:8,column:2},end:{line:183,column:3}},4:{start:{line:10,column:4},end:{line:10,column:4}},5:{start:{line:15,column:4},end:{line:15,column:4}},6:{start:{line:16,column:6},end:{line:16,column:6}},7:{start:{line:17,column:6},end:{line:28,column:7}},8:{start:{line:18,column:8},end:{line:18,column:8}},9:{start:{line:19,column:13},end:{line:28,column:7}},10:{start:{line:20,column:8},end:{line:20,column:8}},11:{start:{line:22,column:12},end:{line:22,column:12}},12:{start:{line:24,column:12},end:{line:24,column:12}},13:{start:{line:27,column:8},end:{line:27,column:8}},14:{start:{line:29,column:6},end:{line:29,column:6}},15:{start:{line:35,column:4},end:{line:35,column:4}},16:{start:{line:36,column:6},end:{line:36,column:6}},17:{start:{line:37,column:6},end:{line:39,column:7}},18:{start:{line:38,column:8},end:{line:38,column:8}},19:{start:{line:40,column:6},end:{line:40,column:6}},20:{start:{line:43,column:4},end:{line:43,column:4}},21:{start:{line:46,column:6},end:{line:46,column:6}},22:{start:{line:49,column:6},end:{line:49,column:6}},23:{start:{line:52,column:6},end:{line:52,column:6}},24:{start:{line:53,column:6},end:{line:56,column:7}},25:{start:{line:54,column:8},end:{line:54,column:8}},26:{start:{line:55,column:8},end:{line:55,column:8}},27:{start:{line:59,column:6},end:{line:59,column:6}},28:{start:{line:63,column:10},end:{line:63,column:10}},29:{start:{line:68,column:10},end:{line:68,column:10}},30:{start:{line:69,column:10},end:{line:69,column:10}},31:{start:{line:70,column:12},end:{line:70,column:12}},32:{start:{line:71,column:14},end:{line:71,column:14}},33:{start:{line:81,column:10},end:{line:81,column:10}},34:{start:{line:82,column:10},end:{line:82,column:10}},35:{start:{line:84,column:10},end:{line:84,column:10}},36:{start:{line:90,column:10},end:{line:90,column:30}},37:{start:{line:90,column:30},end:{line:90,column:30}},38:{start:{line:94,column:10},end:{line:94,column:10}},39:{start:{line:95,column:10},end:{line:95,column:10}},40:{start:{line:96,column:10},end:{line:96,column:10}},41:{start:{line:99,column:10},end:{line:99,column:10}},42:{start:{line:100,column:10},end:{line:100,column:10}},43:{start:{line:102,column:10},end:{line:104,column:11}},44:{start:{line:103,column:12},end:{line:103,column:12}},45:{start:{line:107,column:10},end:{line:113,column:11}},46:{start:{line:109,column:12},end:{line:109,column:12}},47:{start:{line:112,column:12},end:{line:112,column:12}},48:{start:{line:116,column:10},end:{line:116,column:10}},49:{start:{line:126,column:10},end:{line:126,column:10}},50:{start:{line:128,column:10},end:{line:135,column:11}},51:{start:{line:129,column:12},end:{line:129,column:55}},52:{start:{line:129,column:55},end:{line:129,column:55}},53:{start:{line:130,column:12},end:{line:130,column:12}},54:{start:{line:132,column:14},end:{line:132,column:14}},55:{start:{line:137,column:10},end:{line:173,column:11}},56:{start:{line:138,column:12},end:{line:141,column:13}},57:{start:{line:140,column:14},end:{line:140,column:14}},58:{start:{line:143,column:12},end:{line:143,column:12}},59:{start:{line:146,column:12},end:{line:146,column:12}},60:{start:{line:148,column:22},end:{line:151,column:23}},61:{start:{line:150,column:24},end:{line:150,column:24}},62:{start:{line:154,column:22},end:{line:154,column:22}},63:{start:{line:157,column:22},end:{line:157,column:22}},64:{start:{line:162,column:22},end:{line:162,column:22}},65:{start:{line:163,column:22},end:{line:163,column:22}},66:{start:{line:164,column:22},end:{line:164,column:22}},67:{start:{line:165,column:22},end:{line:165,column:22}},68:{start:{line:166,column:22},end:{line:166,column:22}},69:{start:{line:167,column:22},end:{line:167,column:22}},70:{start:{line:168,column:22},end:{line:168,column:22}},71:{start:{line:172,column:12},end:{line:172,column:12}},72:{start:{line:177,column:10},end:{line:177,column:10}},73:{start:{line:180,column:6},end:{line:180,column:6}},74:{start:{line:185,column:2},end:{line:185,column:2}}},branchMap:{1:{line:16,type:"if",locations:[{start:{line:17,column:6},end:{line:17,column:6}},{start:{line:17,column:6},end:{line:17,column:6}}]},2:{line:18,type:"if",locations:[{start:{line:19,column:13},end:{line:19,column:13}},{start:{line:19,column:13},end:{line:19,column:13}}]},3:{line:35,type:"if",locations:[{start:{line:37,column:6},end:{line:37,column:6}},{start:{line:37,column:6},end:{line:37,column:6}}]},4:{line:51,type:"if",locations:[{start:{line:53,column:6},end:{line:53,column:6}},{start:{line:53,column:6},end:{line:53,column:6}}]},5:{line:60,type:"binary-expr",locations:[{start:{line:63,column:28},end:{line:63,column:28}},{start:{line:63,column:45},end:{line:63,column:27}}]},6:{line:87,type:"if",locations:[{start:{line:90,column:10},end:{line:90,column:10}},{start:{line:90,column:10},end:{line:90,column:10}}]},7:{line:99,type:"if",locations:[{start:{line:102,column:10},end:{line:102,column:10}},{start:{line:102,column:10},end:{line:102,column:10}}]},8:{line:99,type:"binary-expr",locations:[{start:{line:102,column:14},end:{line:102,column:14}},{start:{line:102,column:38},end:{line:102,column:10}}]},9:{line:104,type:"if",locations:[{start:{line:107,column:10},end:{line:107,column:10}},{start:{line:107,column:10},end:{line:107,column:10}}]},10:{line:126,type:"if",locations:[{start:{line:129,column:12},end:{line:129,column:12}},{start:{line:129,column:12},end:{line:129,column:12}}]},11:{line:126,type:"binary-expr",locations:[{start:{line:129,column:16},end:{line:129,column:16}},{start:{line:129,column:39},end:{line:129,column:12}}]},12:{line:134,type:"if",locations:[{start:{line:138,column:12},end:{line:138,column:12}},{start:{line:138,column:12},end:{line:138,column:12}}]},13:{line:143,type:"if",locations:[{start:{line:148,column:22},end:{line:148,column:22}},{start:{line:148,column:22},end:{line:148,column:22}}]},14:{line:167,type:"binary-expr",locations:[{start:{line:172,column:12},end:{line:172,column:12}},{start:{line:172,column:32},end:{line:172,column:12}}]}},code:["'use strict';","","let module = angular.module('angularModalService', []);","","module.factory('ModalService', ['$animate', '$document', '$compile', '$controller', '$http', '$rootScope', '$q', '$templateRequest', '$timeout',","  function($animate, $document, $compile, $controller, $http, $rootScope, $q, $templateRequest, $timeout) {","","  function ModalService() {","","    var self = this;","","    //  Returns a promise which gets the template, either","    //  from the template parameter or via a request to the","    //  template url parameter.","    var getTemplate = function(template, templateUrl) {","      var deferred = $q.defer();","      if (template) {","        deferred.resolve(template);","      } else if (templateUrl) {","        $templateRequest(templateUrl, true)","          .then(function(template) {","            deferred.resolve(template);","          }, function(error) {","            deferred.reject(error);","          });","      } else {",'        deferred.reject("No template or templateUrl has been specified.");',"      }","      return deferred.promise;","    };","","    //  Adds an element to the DOM as the last child of its container","    //  like append, but uses $animate to handle animations. Returns a","    //  promise that is resolved once all animation is complete.","    var appendChild = function(parent, child) {","      var children = parent.children();","      if (children.length > 0) {","        return $animate.enter(child, parent, children[children.length - 1]);","      }","      return $animate.enter(child, parent);","    };","","    self.showModal = function(options) {","","      //  Get the body of the document, we'll add the modal to this.","      var body = angular.element($document[0].body);","","      //  Create a deferred we'll resolve when the modal is ready.","      var deferred = $q.defer();","","      //  Validate the input parameters.","      var controllerName = options.controller;","      if (!controllerName) {",'        deferred.reject("No controller has been specified.");',"        return deferred.promise;","      }","","      //  Get the actual html of the template.","      getTemplate(options.template, options.templateUrl)","        .then(function(template) {","","          //  Create a new scope for the modal.","          var modalScope = (options.scope || $rootScope).$new();","","          // Automatically close the modal if the route changes. We bind this in a $timeout as sometimes (particularly","          // if using ui-router) locationChangeSuccess hasn't fired yet when the new route's controller code is run","          // and if that code triggered a modal it would get closed immediately when locationChangeSuccess was fired.","          var rootScopeOnClose;","          $timeout(function() {","            rootScopeOnClose = $rootScope.$on('$locationChangeSuccess', function() {","              cleanUpClose();","            });","          });","","          //  Create the inputs object to the controller - this will include","          //  the scope, as well as all inputs provided.","          //  We will also create a deferred that is resolved with a provided","          //  close function. The controller can then call 'close(result)'.","          //  The controller can also provide a delay for closing - this is","          //  helpful if there are closing animations which must finish first.","          var closeDeferred = $q.defer();","          var closedDeferred = $q.defer();","","          var inputs = {","            $scope: modalScope,","            close: closeModal","          };","","          //  If we have provided any inputs, pass them to the controller.","          if (options.inputs) angular.extend(inputs, options.inputs);","","          //  Compile then link the template element, building the actual element.","          //  Set the $element on the inputs so that it can be injected if required.","          var linkFn = $compile(template);","          var modalElement = linkFn(modalScope);","          inputs.$element = modalElement;","","          //  Create the controller, explicitly specifying the scope to use.","          var controllerObjBefore = modalScope[options.controllerAs];","          var modalController = $controller(options.controller, inputs, false, options.controllerAs);","","          if (options.controllerAs && controllerObjBefore) {","            angular.extend(modalController, controllerObjBefore);","          }","","          //  Finally, append the modal to the dom.","          if (options.appendElement) {","            // append to custom append element","            appendChild(options.appendElement, modalElement);","          } else {","            // append to body when no custom append element is specified","            appendChild(body, modalElement);","          }","","          //  We now have a modal object...","          var modal = {","            controller: modalController,","            scope: modalScope,","            element: modalElement,","            close: closeDeferred.promise,","            closed: closedDeferred.promise,","            closeModal: closeModal","          };","","          //  ...which is passed to the caller via the promise.","          deferred.resolve(modal);","","          function closeModal(result, delay) {","            if (delay === undefined || delay === null) delay = 0;","            $timeout(function() {","","              cleanUpClose(result);","","            }, delay);","          }","","          function cleanUpClose(result) {","            if (!modalElement) {","              // Clean up has already run","              return;","            }","","            closeDeferred.resolve(result);","","            //  Let angular remove the element and wait for animations to finish.","            $animate.leave(modalElement)","                    .then(function () {","                      if (!modalElement) {","                        // Clean up has already run","                        return;","                      }","","                      //  Resolve the 'closed' promise.","                      closedDeferred.resolve(result);","","                      //  We can now clean up the scope","                      modalScope.$destroy();","","                      //  Unless we null out all of these objects we seem to suffer","                      //  from memory leaks, if anyone can explain why then I'd","                      //  be very interested to know.","                      inputs.close = null;","                      deferred = null;","                      closeDeferred = null;","                      modal = null;","                      inputs = null;","                      modalElement = null;","                      modalScope = null;","                    });","","            // remove event watcher","            rootScopeOnClose && rootScopeOnClose();","          }","","        })","        .then(null, function(error) { // 'catch' doesn't work in IE8.","          deferred.reject(error);","        });","","      return deferred.promise;","    };","","  }","","  return new ModalService();","}]);",""]}),l=l["/Users/aarron/angular-modal-service/src/angular-modal-service.js"],l.s[1]++;var o=angular.module("angularModalService",[]);l.s[2]++,o.factory("ModalService",["$animate","$document","$compile","$controller","$http","$rootScope","$q","$templateRequest","$timeout",function(e,n,o,t,i,r,a,c,s){function m(){l.f[2]++,l.s[4]++;var i=this;l.s[5]++;var m=function(e,n){l.f[3]++,l.s[6]++;var o=a.defer();return l.s[7]++,e?(l.b[1][0]++,l.s[8]++,o.resolve(e)):(l.b[1][1]++,l.s[9]++,n?(l.b[2][0]++,l.s[10]++,c(n,!0).then(function(e){l.f[4]++,l.s[11]++,o.resolve(e)},function(e){l.f[5]++,l.s[12]++,o.reject(e)})):(l.b[2][1]++,l.s[13]++,o.reject("No template or templateUrl has been specified."))),l.s[14]++,o.promise};l.s[15]++;var u=function(n,o){l.f[6]++,l.s[16]++;var t=n.children();return l.s[17]++,t.length>0?(l.b[3][0]++,l.s[18]++,e.enter(o,n,t[t.length-1])):(l.b[3][1]++,l.s[19]++,e.enter(o,n))};l.s[20]++,i.showModal=function(i){l.f[7]++,l.s[21]++;var c=angular.element(n[0].body);l.s[22]++;var d=a.defer();l.s[23]++;var p=i.controller;return l.s[24]++,p?(l.b[4][1]++,l.s[27]++,m(i.template,i.templateUrl).then(function(n){function m(e,n){l.f[11]++,l.s[51]++,l.b[11][0]++,void 0===n||(l.b[11][1]++,null===n)?(l.b[10][0]++,l.s[52]++,n=0):l.b[10][1]++,l.s[53]++,s(function(){l.f[12]++,l.s[54]++,p(e)},n)}function p(n){return l.f[13]++,l.s[56]++,g?(l.b[12][1]++,l.s[58]++,v.resolve(n),l.s[59]++,e.leave(g).then(function(){return l.f[14]++,l.s[60]++,g?(l.b[13][1]++,l.s[62]++,y.resolve(n),l.s[63]++,f.$destroy(),l.s[64]++,$.close=null,l.s[65]++,d=null,l.s[66]++,v=null,l.s[67]++,C=null,l.s[68]++,$=null,l.s[69]++,g=null,l.s[70]++,void(f=null)):(l.b[13][0]++,void l.s[61]++)}),l.s[71]++,l.b[14][0]++,h&&(l.b[14][1]++,h()),void 0):(l.b[12][0]++,void l.s[57]++)}l.f[8]++,l.s[28]++;var f=(l.b[5][0]++,i.scope||(l.b[5][1]++,r)).$new();l.s[29]++;var h;l.s[30]++,s(function(){l.f[9]++,l.s[31]++,h=r.$on("$locationChangeSuccess",function(){l.f[10]++,l.s[32]++,p()})}),l.s[33]++;var v=a.defer();l.s[34]++;var y=a.defer();l.s[35]++;var $={$scope:f,close:m};l.s[36]++,i.inputs?(l.b[6][0]++,l.s[37]++,angular.extend($,i.inputs)):l.b[6][1]++,l.s[38]++;var b=o(n);l.s[39]++;var g=b(f);l.s[40]++,$.$element=g,l.s[41]++;var w=f[i.controllerAs];l.s[42]++;var S=t(i.controller,$,!1,i.controllerAs);l.s[43]++,l.b[8][0]++,i.controllerAs&&(l.b[8][1]++,w)?(l.b[7][0]++,l.s[44]++,angular.extend(S,w)):l.b[7][1]++,l.s[45]++,i.appendElement?(l.b[9][0]++,l.s[46]++,u(i.appendElement,g)):(l.b[9][1]++,l.s[47]++,u(c,g)),l.s[48]++;var C={controller:S,scope:f,element:g,close:v.promise,closed:y.promise,closeModal:m};l.s[49]++,d.resolve(C)}).then(null,function(e){l.f[15]++,l.s[72]++,d.reject(e)}),l.s[73]++,d.promise):(l.b[4][0]++,l.s[25]++,d.reject("No controller has been specified."),l.s[26]++,d.promise)}}return l.f[1]++,l.s[74]++,new m}])}]);
//# sourceMappingURL=./dst/angular-modal-service.min.js.map